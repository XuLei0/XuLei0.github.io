---
title: 滑动窗口
tags: 算法
categories: 算法
mathjax: true
abbrlink: 60655
date: 2022-05-15 20:19:55
---

# 滑动窗口

### 代码框架

```java
public void slidingWindow(string s, string t){
    HashMap<Character,Integer> need = new HashMap<Character,Integer>;
    HashMap<Character,Integer> window = new HashMap<Character,Integer>;
    // 先将 need 填完，need是固定的
    for(char c:t.toCharArray()){
    	need.put(c,need.getOrDefault(c,0)+1);
    }
    int left = 0,right = 0;
    int valid = 0;
    while(right < s.length()){
        char c = s.charAt(right);
        right++;
        // 对窗口window进行更新
        
        while(windows need shrink){
            char d = s.charAt(left);
            left++;
            // 对窗口进行更新
        }
    }
}
```

### 题目

1. 最小覆盖子串（76）

​	https://leetcode.cn/problems/minimum-window-substring/

```java
class Solution {
    public String minWindow(String s, String t) {
		HashMap<Character,Integer> need = new HashMap<Character,Integer>();
        HashMap<Character,Integer> window = new HashMap<Character,Integer>();
        for(char c:t.toCharArray()){
            need.put(c,need.getOrDefault(c,0)+1);
        }
        int left = 0, right = 0;
        int start = 0, len = Integer.MAX_VALUE;
        int valid = 0;
        while(right < s.length()){
            char c = s.charAt(right);
            right++;
            if(need.containsKey(c)){
                window.put(c,window.getOrDefault(c,0)+1);    // 加入到窗口中
                if(window.get(c).equals(need.get(c))){       // 如果满足need，valid++
                    valid++;
                }
            }
            while(valid==need.size()){         // 收缩
                if(right-left<len){
                    start = left;
                    len = right - left;
                }
                char d = s.charAt(left);
                left++;
                if(need.containsKey(d)){
                    if(window.get(d).equals(need.get(d))){
                        valid--;
                    }
                    window.put(d,window.get(d)-1);
                }
            }
        }
        return len==Integer.MAX_VALUE?"":s.substring(start,start+len);
    }
}
```

2. 字符串排列（567）

​	https://leetcode.cn/problems/permutation-in-string/

```java
class Solution {
    public boolean checkInclusion(String s1, String s2) {
        HashMap<Character,Integer> need = new HashMap<Character,Integer>();
        HashMap<Character,Integer> window = new HashMap<Character,Integer>();
        for(char c:s1.toCharArray()){
            need.put(c,need.getOrDefault(c,0)+1);
        }
        int left = 0, right = 0;
        int valid = 0;
        while(right < s2.length()){
            char c = s2.charAt(right);
            right++;
            if(need.containsKey(c)){
                window.put(c,window.getOrDefault(c,0)+1);
                if(window.get(c)==need.get(c)){
                    valid++;
                }
            }
            while(right-left+1 > s1.length()){
                if(valid==need.size()){
                    return true;
                }
                char d = s2.charAt(left);
                left++;
                if(need.containsKey(d)){
                    if(need.get(d)==window.get(d)){
                        valid--;
                    }
                    window.put(d,window.get(d)-1);
                }
            }
        }
        return false;
    }
}
```

3. 找所有字母异位词（438）

​	https://leetcode.cn/problems/find-all-anagrams-in-a-string/

```java
class Solution {
    public List<Integer> findAnagrams(String s, String p){
        List<Integer> res = new ArrayList<Integer>();
        HashMap<Character,Integer> need = new HashMap<Character,Integer>();
        HashMap<Character,Integer> window = new HashMap<Character,Integer>();
        for(char x:p.toCharArray()){
            need.put(x,need.getOrDefault(x,0)+1);
        }
        int left = 0, right = 0, valid = 0;
        while(right < s.length()){
            char c = s.charAt(right);
            right++;
            if(need.containsKey(c)){
                window.put(c,window.getOrDefault(c,0)+1);
                if(window.get(c).equals(need.get(c))){      
                    valid++;
                }
            }
            while(right-left+1 > p.length()){
                if(valid==need.size()){
                    res.add(left);
                }
                char d = s.charAt(left);
                left++;
                if(need.containsKey(d)){
                    if(window.get(d).equals(need.get(d))){
                        valid--;
                    }
                    window.put(d,window.get(d)-1);  
                }
            }
        }
        return res;
    }
}
```

4. 无重复字符串的最长字串（3）

​	https://leetcode.cn/problems/longest-substring-without-repeating-characters/

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        int res = 0;
        int left = 0,right = 0;
        HashMap<Character,Integer> window = new HashMap<Character,Integer>();
        while(right < s.length()){
            char c = s.charAt(right);
            right++;
            window.put(c,window.getOrDefault(c,0)+1);
            while(window.get(c)>1){  // 当已存在 c 字符时
                char d = s.charAt(left);
                left++;
                window.put(d,window.get(d)-1);
            }
            res = Math.max(res,right-left);   // 当没有重复数据时，right都是经过 + 1的，所以不需要 right-left + 1
        }
        return res;
    }
}
```

